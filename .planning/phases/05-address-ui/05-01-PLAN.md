---
phase: 05-address-ui
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/dashboard/src/components/rewards/address-card.tsx
  - apps/dashboard/src/components/rewards/address-list.tsx
autonomous: true

must_haves:
  truths:
    - "User can view list of all tracked addresses with verification status"
    - "Addresses are grouped by chain (Solana section, EVM section)"
    - "Each address shows chain icon, status badge, and truncated address"
    - "Address count and limit (X/5) is visible to user"
  artifacts:
    - path: "apps/dashboard/src/components/rewards/address-card.tsx"
      provides: "Enhanced address card with chain icon and three-dot menu"
      contains: "MoreVertical"
    - path: "apps/dashboard/src/components/rewards/address-list.tsx"
      provides: "Chain-grouped address list with count display"
      contains: "solanaAddresses"
  key_links:
    - from: "address-card.tsx"
      to: "DropdownMenu"
      via: "import from ui/dropdown-menu"
      pattern: "DropdownMenu.*MoreVertical"
    - from: "address-list.tsx"
      to: "address-card.tsx"
      via: "AddressCard component"
      pattern: "AddressCard.*chain_type"
---

<objective>
Enhanced address card and list UI with chain grouping and improved status display

Purpose: Deliver ADDR-05 (view list with status) and ADDR-07 (multi-address support UI) requirements. Users need to see their addresses clearly organized by chain with proper status indicators.

Output: Updated address-card.tsx with chain icons, three-dot menu structure, and improved visual hierarchy. Updated address-list.tsx with chain grouping and address count display.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-address-ui/05-CONTEXT.md

# Existing files to modify
@apps/dashboard/src/components/rewards/address-card.tsx
@apps/dashboard/src/components/rewards/address-list.tsx
@apps/dashboard/src/components/ui/dropdown-menu.tsx
@apps/dashboard/src/lib/api.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance AddressCard with chain icon and three-dot menu</name>
  <files>apps/dashboard/src/components/rewards/address-card.tsx</files>
  <action>
Update AddressCard component:

1. Add chain icon next to wallet icon:
   - Solana: Use a simple "S" badge or find an appropriate icon (can use text-based indicator)
   - EVM: Use "ETH" or Ethereum-style indicator
   - Display chain type text below address (e.g., "Solana" or "Ethereum")

2. Improve status badge styling per CONTEXT.md:
   - Green badge with CheckCircle icon for "Verified"
   - Yellow badge with Clock icon for "Pending"
   - Add visual dimming (opacity) for unverified cards
   - Add warning text for pending: "Rewards won't track until verified"

3. Replace X button with three-dot menu (MoreVertical from lucide-react):
   - Use DropdownMenu from ui/dropdown-menu
   - Menu item: "Remove" with Trash2 icon
   - Keep onRemove callback - menu item calls it
   - Disable menu during removal (isRemoving state)

4. Add onVerify optional callback prop for inline verify button on pending cards:
   - Show "Verify" button on pending cards that calls onVerify(address)
   - This will be wired in Plan 02

Keep existing props interface compatible. Add optional onVerify prop.
  </action>
  <verify>
`npm run build` passes in apps/dashboard. AddressCard renders with chain indicator, status badge, and three-dot menu visible in UI.
  </verify>
  <done>
Address cards show chain type indicator, improved status badges with dimming for pending, and three-dot menu with Remove option instead of X button.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update AddressList with chain grouping and count display</name>
  <files>apps/dashboard/src/components/rewards/address-list.tsx</files>
  <action>
Update AddressList component:

1. Group addresses by chain_type:
   - Filter addresses into solanaAddresses and evmAddresses arrays
   - Render Solana section first, then EVM section
   - Each section has header: "Solana Addresses" / "EVM Addresses"
   - Only show section if it has addresses

2. Add address count and limit display:
   - Show "X/5 addresses" in header area
   - When at limit (5), show text indicating limit reached
   - Disable "Add Address" button when at limit with tooltip or visual cue

3. Update empty state:
   - When no addresses at all: friendly message with "Add your first address" CTA
   - Use similar pattern to empty-state.tsx but with Wallet icon

4. Section styling:
   - Visual separation between Solana and EVM sections (subtle divider or spacing)
   - Section headers with chain icon/indicator

Keep existing props (addresses, onAddAddress, onAddressRemoved). Pass chain-appropriate context to cards.
  </action>
  <verify>
`npm run build` passes. Addresses render grouped by chain with section headers. Count shows "X/5 addresses". Add button disables at limit.
  </verify>
  <done>
Address list groups addresses by chain (Solana first, EVM second), shows address count with limit indicator, and has improved empty state.
  </done>
</task>

</tasks>

<verification>
1. Run `npm run build` in apps/dashboard - must pass
2. Visual verification: Address cards show chain icons and three-dot menu
3. Visual verification: List groups addresses by chain with section headers
4. Visual verification: Count shows "X/5 addresses" format
5. Add button is disabled when at 5 addresses
</verification>

<success_criteria>
- AddressCard displays chain type indicator (Solana vs EVM)
- AddressCard has three-dot menu with "Remove" option
- AddressCard shows enhanced status badges with dimming for pending
- AddressList groups addresses by chain (Solana section, EVM section)
- AddressList shows address count in "X/5" format
- AddressList disables Add button at limit
- Empty state shows friendly message with CTA
- All builds pass
</success_criteria>

<output>
After completion, create `.planning/phases/05-address-ui/05-01-SUMMARY.md`
</output>
